const connectToDatabase = require('../../database/db')
const Customer = require('../../models/CustomerModel')

module.exports.updateCustomer = async (event) => {

    try{
        await connectToDatabase()
        const {name, email, phone, password} = JSON.parse(event.body)
        console.log(name, email, phone, password)
        const updatedCusomer = await Customer.findOneAndUpdate(
            {
                _id: event.pathParameters.id
            },
            {
                $set: {
                    name,
                    email,
                    phone,
                    password
                }
            }
        )

        return {
            statusCode: 200,
            headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Headers": "*"
            },
            body: JSON.stringify(updatedCusomer)
        }
    }catch(error) {
        return {
            statusCode: 500,
            body: JSON.stringify(
                {
                    message: "something went wrong",
                    error: error
                }
            )
        }

    }
}